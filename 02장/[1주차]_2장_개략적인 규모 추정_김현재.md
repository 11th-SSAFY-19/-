# 개략적 규모 추정
개략적 규모 추정을 효과적으로 해내려면 규모 확장성을 표현하는데 필요한 기본기에 능숙해야 한다. 
특히, 2의 제곱수나 응답 지연 값, 그리고 가용성에 관계된 수치들을 기본적으로 잘 이해하는 걸 목표로 해야한다. 

<br>

---
### 2의 제곱 수 
데이터 볼륨의 단위를 2의 제곱수로 표현하면 어떻게 되는지를 먼저 알도록 하자.

최소 단위는 1byte이고, 8비트로 구성된다. ASCII 문자 하나가 차지하는 데이터 크기는 1byte이다. 

![](https://velog.velcdn.com/images/khjmr98/post/8329a55f-dd22-4fb0-af5d-00cc081b69e6/image.png)

---
### 응답 지연 값
![](https://velog.velcdn.com/images/khjmr98/post/9d8c3c8a-4e19-4f31-a843-2d23cf86dd16/image.png)

- 메모리는 빠르지만 디스크는 아직도 느리다.
- 디스크 탐색은 가능한 피하자.
- 단순한 압축 알고리즘은 빠르다.
- 데이터를 인터넷으로 전송하기 전에 가능하면 압축하라.
- 데이터 센터는 보통 여러 지역에 분산되어 있고, 센터들 간에 데이터를 주고받는 데는 시간이 걸린다. 

---
### 가용성에 관계된 수치들 

고가용성은 시스템이 오랜시간동안 지속적으로 중단 없이 운영될 수 있는 능력을 지칭하는 용어이다. 
고가용성을 표현하는 값은 퍼센트로 표현된다. 100%는 시스템이 단 한 번도 중단된 적이 없었음을 의미한다. 

SLA 는 서비스 사업자가 보편적으로 사용하는 용어로, 서비스 사업자와 고객 사이에 맺어진 합의를 의미한다. 

이 합의에는 서비스 사업자가 제공하는 서비스의 가용 시간이 공식적으로 기술되어 있다. 99% 이상의 SLA 를 제공한다. 

![](https://velog.velcdn.com/images/khjmr98/post/a6765f52-89ef-4674-983e-dbeba7712ed7/image.png)

<br>
<br>

### 예제: 트위터 QPS와 저장소 요구량 추정 
**가정** 
- 월간 능동 사용자는 3억명이다.
- 50% 의 사용자가 트위터를 매일 사용한다.
- 평균적으로 각 사용자는 매일 2건의 트윗을 올린다.
- 미디어를 포함하는 트윗은 10% 정도다.
- 데이터는 5년간 보관된다.

**추정** 

QPS 추정치

- 일간 능동 사용자 = 3억 * 50% = 1.5억(150million)
- QPS= 1.5억 * 2트윗/24시간/3600초 = 약 3500
- 최대 QPS = 2 * QPS = 약 7000

미디어 저장을 위한 저장소 요구량
- 평균 트윗 크기
  - tweet id 
  - 텍스트 140바이트 
  - 미디어에 1MB
- 미디어 저장소 요구량: 1.5억*2*10%* 1 MB=30TB/일
- 5년간 미디어를 보관하기 위한 저장소 요구량: 30TB*365*5= 약 55PB

**팁** 

- 근사치 활용한 계산 
- 가정들을 적어 두라.
- 단위를 붙여라
- 개략적 규모 추정 문제는 QPS, 최대 QPS, 저장소 요구량, 캐시 요구량, 서버 수 등을 추정하는 것.
