# 3. 시스템 설계 면접 공략법
이 장에서는 시스템 설계 면접에 기초를 두어 설계 면접에 어떻게 효과적으로 접근할 수 있는지에 대한 접근법을 제시한다.

## 📌 효과적 면접을 위한 4단계 접근법

### 1단계 : 문제 이해 및 설계 범위 확정
- 시스템 설계 면접 시 요구사항을 완전히 이해하지 않고 답을 내놓는 행위는 위험하다.
    즉, 정답이 없는 설계 면접 특성상 깊이 생각하고 요구사항과 가정들을 분명히 하여야 한다.

- 면접관이 면접의 요구사항에 대해 가정을 하는 경우 메모하는 습관을 기르자 -> 이후에 반영해야 하기 때문!

💡 **예제** 
뉴스 피드(news feed) 시스템을 설계하라는 요구를 받았다고 했을 때 요구사항을 요청해야 한다.

    Q. 모바일 앱과 웹 앱 가운데 어느 쪽을 지원해야 하나요? 혹은 둘 다 인가요?
    A. 둘다 지원해야 한다.
    Q. 가장 중요한 기능은 무엇인가요?
    A. 새로운 포스트(post)를 올리고, 다른 친구의 뉴스 피드를 볼 수 있도록 하는 기능이다.
    Q. 뉴스 피드는 시간 역순으로 정렬되어야 하나요? 아니면 특별한 정렬 기준이 있나요? 
    피드에 올라갈 포스트마다 다른 가중치가 부여되어야 하나요? 가장 가까운 친구의 
    포스트가 사용자 그룹에 올라가는 포스트 보다 중요하나요?
    A. 단순하게 하기 위해 역순으로 정렬한다고 가정...

위와 같이 요구사항을 이해하고 모호함을 없애는 것이 가장 중요하다.

### 2단계 : 개략적인 설계안 제시 및 동의 구하기
- 계략적인 설계안을 면접관에게 제시하고 동의를 얻는 것이다.
- 설계안에 대한 최초 청사진을 제시하고 의견 구하기.
- 화이트보드나 종이에 핵심 컴포넌트를 포함하는 다이어 그램을 그리기(ex. 웹 클라이언트, API, 웹서버, 데이터 저장소, 캐시, CDN, 메시지 큐 등등..)
- 최초 설계안이 시스템 규모에 관계된 제약사항들에 어울리는지 확인해야 한다.

💡 **예제**
위의 뉴스 피드 예제를 그대로 활용.

개략적으로 **피드 발행**과 **피드 생성**에 대한 설계를 나누어 생각할 수 있다.

- **피드 발행** : 사용자가 포스트를 올리면 관련된 데이터가 캐시/데이터베이스에 기록되고, 해당 사용자의 친구(friend) 뉴스 피드에 뜨게 된다.
- **피드 생성** : 어떤 사용자의 뉴스 피드는 해당 사용자 친구들의 포스트를 시간 역순으로(최신 순) 정렬하여 만든다.

![image](https://github.com/11th-SSAFY-19/large-scale-system-design/assets/80228712/d5bc1c37-3fe6-4394-845f-d6e1e5ea1e59)


### 3단계 : 상세 설계
- 달성 목표와 기능 범위 확인 / 전체 설계의 청사진 / 해당 청사진에 대한 의견 / 상세 설계에서 집중해야 할 영역 등을 완료한 상태라고 가정.
- 설계 대상 컴포넌트 사이에 우선순위를 정해야 한다.
  - 면접 상황에 맞게 컴포넌트 별 중요도를 파악한다.

💡 **예제**
뉴스 피드 시스템의 개략적 설계를 마쳤다고 가정.
  1. 피드발행
   ![image](https://github.com/11th-SSAFY-19/large-scale-system-design/assets/80228712/08d2f767-6c57-4daf-b24a-7db6eadbc68f)
  2. 뉴스 피드 가져오기
![image](https://github.com/11th-SSAFY-19/large-scale-system-design/assets/80228712/0f8c44d0-963e-4d3e-bf62-d529fb18f424)

   
에 대한 상세 설계를 제시하면 된다.


### 4단계 : 마무리
- 시스템 병목구간 혹은 좀 더 개선 가능한 지점을 요청할 때 개선할 부분이 없다고 대답하지 않기.
- 자신의 설계를 다시 한번 요약해 기억을 환기 시켜주는 효과를 줄 수 있다.
- 오류가 발생할 때 무슨 일이 생기는지 확인해보기.
- 운영 관련 이슈(메트릭, 로그, 배포)에 대한 이야기를 할 수 있다.
- 미래에 닥칠 규모 확장 요구에 어떻게 대처할지도 생각해 놓는게 좋다.

### 정리

✨**해야 할 것**
- 질문을 통해 내가 내린 가정이 올바른지 확인해야 한다.
- 문제의 요구사항을 이해하고, 정확하게 이해했는지 검토한다.
- 면접관가 소통하며 여러가지 해법을 제시해라.
- 개략적 설계에 면접관이 동의하면, 각 컴포넌트의 세부사항을 설명하여라.

✖ **하지 말아야 할 것**
- 전형적인 문제들에 대비해라.
- 요구사항이나 가정들이 분명하지 않을 때 설계를 제시하지 마라.
- 처음부터 특정 컴포넌트의 세부사항을 자세히 설명하지 마라.
- 면접관과 소통하며, 힌트를 청해라.

`+ 시간배분` 
45분정도 시간이 주어진다고 했을 때
1단계 - 문제 이해 및 설계 범위 확정 : 3분 ~ 10분
2단계 - 개략적 설계안 제시 및 동의 구하기 : 10분 ~ 15분
3단계 - 상세 설계 : 10분 ~ 25분
4단계 - 마무리 : 3분 ~ 5분